<!DOCTYPE html>
<html lang="pt-br">
  <head>
    <meta charset="UTF-8" />
    <title>Lista de Pedidos</title>

    <!-- Estilos -->
    <link rel="stylesheet" href="/static/style.css" />
  </head>
  <body>
    <!-- Container central -->
    <div class="container">
      <h1>Pedidos</h1>

      <!-- Verifica se hÃ¡ pedidos -->
      {% for pedido in pedidos %}
      <li>
        <strong>{{ pedido.nick }}</strong> â€” {{ pedido.descricao }}<br />
        <em>{{ pedido.dia_semana }} Ã s {{ pedido.horario }}</em><br />

        {% if not pedido or pedido.precisa_ajuda != 1 %}
        <!-- Modo PT: pode adicionar membros -->
        <p><strong>Membros da PT:</strong></p>
        <ul>
          {% for p in participantes_por_pedido[pedido.id] %}
          <li style="margin-left: 15px">ðŸ”¹ {{ p.nick }}</li>
          {% endfor %}
        </ul>

        {% if participantes_por_pedido[pedido.id]|length < 3 %}
        <form method="post" action="/participar/{{ pedido.id }}">
          <input type="text" name="nick" placeholder="Seu nick" required />
          <button type="submit">Entrar na PT</button>
        </form>
        {% endif %}

        <!-- BotÃ£o para finalizar PT -->
        <form method="post" action="/finalizar/{{ pedido.id }}">
          <input type="password" name="senha" placeholder="Senha" required />
          <button type="submit">Finalizar</button>
        </form>

        {% else %}
        <!-- Modo ajuda: apenas finalizar -->
        <form method="post" action="/finalizar/{{ pedido.id }}">
          <input type="password" name="senha" placeholder="Senha" required />
          <button type="submit">Finalizar</button>
        </form>
        {% endif %}
      </li>
      {% endfor %}

      <!-- Link para voltar ao formulÃ¡rio -->
      <a href="/">Voltar</a>
    </div>
  </body>
</html>
